-- The Forge: Ultimate Craft Luck & Rare Ore Script (FULL VERSION)

-- === PART 1: GUI AND CORE SYSTEMS ===
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local localPlayer = Players.LocalPlayer
local playerGui = localPlayer:WaitForChild("PlayerGui")

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ForgeLuckHUD"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 220, 0, 100)
MainFrame.Position = UDim2.new(0, 15, 0, 120)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 15, 35)
MainFrame.BackgroundTransparency = 0.15
MainFrame.BorderSizePixel = 0

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(180, 40, 255)
UIStroke.Thickness = 2.5
UIStroke.Transparency = 0.3
UIStroke.Parent = MainFrame

local LuckButton = Instance.new("TextButton")
LuckButton.Name = "LuckButton"
LuckButton.Size = UDim2.new(0.85, 0, 0.55, 0)
LuckButton.Position = UDim2.new(0.075, 0, 0.1, 0)
LuckButton.BackgroundColor3 = Color3.fromRGB(90, 10, 130)
LuckButton.BackgroundTransparency = 0
LuckButton.Text = "ðŸ”¥ 99999x CRAFT LUCK"
LuckButton.TextColor3 = Color3.fromRGB(255, 230, 100)
LuckButton.TextScaled = true
LuckButton.Font = Enum.Font.GothamBlack
LuckButton.TextStrokeTransparency = 0.5
LuckButton.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(0, 8)
ButtonCorner.Parent = LuckButton

local ButtonStroke = Instance.new("UIStroke")
ButtonStroke.Color = Color3.fromRGB(255, 165, 0)
ButtonStroke.Thickness = 2
ButtonStroke.Parent = LuckButton

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(1, 0, 0.25, 0)
StatusLabel.Position = UDim2.new(0, 0, 0.7, 0)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "STATUS: OFF"
StatusLabel.TextColor3 = Color3.fromRGB(220, 60, 60)
StatusLabel.TextSize = 16
StatusLabel.Font = Enum.Font.GothamBold

LuckButton.Parent = MainFrame
StatusLabel.Parent = MainFrame
MainFrame.Parent = ScreenGui
ScreenGui.Parent = playerGui

local luckActive = false
local hookedRemotes = {}
local originalMethods = {}
local guaranteedRare = true

-- Hook remotes function
local function hookGameRemotes()
    local remotesFound = 0
    for _, container in pairs({ReplicatedStorage, workspace}) do
        for _, item in pairs(container:GetDescendants()) do
            if item:IsA("RemoteEvent") or item:IsA("RemoteFunction") then
                local nameLower = item.Name:lower()
                if nameLower:find("craft") or nameLower:find("forge") or 
                   nameLower:find("create") or nameLower:find("smith") or
                   nameLower:find("mine") or nameLower:find("drop") or
                   nameLower:find("reward") or nameLower:find("loot") then
                    
                    if item:IsA("RemoteEvent") then
                        originalMethods[item] = item.FireServer
                        item.FireServer = function(self, ...)
                            local args = {...}
                            if luckActive then
                                if type(args[1]) == "table" then
                                    args[1].successChance = 100
                                    args[1].luckMultiplier = 99999
                                    args[1].guaranteedRare = true
                                end
                            end
                            return originalMethods[item](self, unpack(args))
                        end
                        remotesFound = remotesFound + 1
                    end
                end
            end
        end
    end
    return remotesFound
end

-- Modify random
local originalRandom = math.random
math.random = function(a, b)
    if luckActive then
        if b and b <= 10 then return b
        elseif b and b == 100 then return 100
        elseif b and b > 100 then return math.floor(b * 0.95)
        end
    end
    return originalRandom(a, b)
end

-- Button handler
LuckButton.MouseButton1Click:Connect(function()
    luckActive = not luckActive
    if luckActive then
        LuckButton.BackgroundColor3 = Color3.fromRGB(40, 180, 40)
        LuckButton.Text = "âœ… LUCK ACTIVE"
        StatusLabel.Text = "STATUS: MAX LUCK"
        StatusLabel.TextColor3 = Color3.fromRGB(50, 220, 50)
        hookGameRemotes()
    else
        LuckButton.BackgroundColor3 = Color3.fromRGB(90, 10, 130)
        LuckButton.Text = "ðŸ”¥ 99999x CRAFT LUCK"
        StatusLabel.Text = "STATUS: OFF"
        StatusLabel.TextColor3 = Color3.fromRGB(220, 60, 60)
        math.random = originalRandom
    end
end)

wait(3)
hookGameRemotes()

-- === PART 2: LOOT MANIPULATION ===
local originalLootTables = {}
local legendaryOreIds = {}

local function scanGameItems()
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("ModuleScript") then
            if obj.Name:find("Config") or obj.Name:find("Items") then
                pcall(function()
                    local config = require(obj)
                    if type(config) == "table" then
                        if config.Rarities then
                            originalLootTables[obj] = config.Rarities
                            for i, rarity in ipairs(config.Rarities) do
                                if luckActive then
                                    if rarity.name:lower():find("common") then
                                        rarity.chance = 0
                                    elseif rarity.name:lower():find("legendary") then
                                        rarity.chance = 100
                                    end
                                end
                            end
                        end
                    end
                end)
            end
        end
    end
end

local function enhanceMiningSpots()
    for _, spot in pairs(workspace:GetDescendants()) do
        if spot.Name:find("Ore") or spot.Name:find("Rock") then
            if luckActive and not spot:FindFirstChild("LuckGlow") then
                local glow = Instance.new("PointLight")
                glow.Name = "LuckGlow"
                glow.Brightness = 5
                glow.Range = 15
                glow.Color = Color3.fromRGB(255, 215, 0)
                glow.Parent = spot
            elseif not luckActive and spot.LuckGlow then
                spot.LuckGlow:Destroy()
            end
        end
    end
end

local function monitorCrafting()
    while true do
        wait(2)
        if luckActive then
            enhanceMiningSpots()
        end
    end
end

spawn(monitorCrafting)
wait(5)
scanGameItems()

print("ðŸŽ® The Forge Luck Script Loaded!")
print("Click the '99999x CRAFT LUCK' button to activate!")
