-- Security Camera System by sherikyt
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local config = {
    maxCameras = 5,
    cameraFOV = 70,
    moveSpeed = 10,
    zoomSpeed = 5,
    panSpeed = 50
}

local state = {
    cameras = {}, -- Table of camera objects
    currentCamera = nil,
    cameraIndex = 0,
    isMonitoring = false,
    isPlacing = false,
    menuVisible = true,
    zoomLevel = 1,
    camRotation = Vector2.new(0, 0)
}

-- Create GUI
local gui = Instance.new("ScreenGui")
gui.Name = "CameraSystemGUI"
gui.ResetOnSpawn = false
gui.Parent = playerGui

-- Main menu
local menu = Instance.new("Frame")
menu.Name = "MainMenu"
menu.Size = UDim2.new(0, 250, 0, 350)
menu.Position = UDim2.new(0, 10, 0.5, -175)
menu.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
menu.BackgroundTransparency = 0.1
menu.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = menu

-- Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -10, 0, 30)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Text = "ðŸ“¹ SECURITY CAMERAS"
title.TextColor3 = Color3.fromRGB(255, 100, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = menu

local creator = Instance.new("TextLabel")
creator.Name = "Creator"
creator.Size = UDim2.new(1, -10, 0, 20)
creator.Position = UDim2.new(0, 10, 0, 35)
creator.BackgroundTransparency = 1
creator.Text = "by sherikyt"
creator.TextColor3 = Color3.fromRGB(180, 180, 220)
creator.Font = Enum.Font.Gotham
creator.TextSize = 12
creator.TextXAlignment = Enum.TextXAlignment.Left
creator.Parent = menu

-- Function to create button
local function createButton(name, text, position, icon, color)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0.9, 0, 0, 40)
    button.Position = position
    button.BackgroundColor3 = color
    button.Text = icon .. " " .. text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.GothamBold
    button.TextSize = 13
    button.TextWrapped = true
    button.Parent = menu
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = button
    
    button.MouseButton1Down:Connect(function()
        button.BackgroundTransparency = 0.3
    end)
    
    button.MouseButton1Up:Connect(function()
        button.BackgroundTransparency = 0
    end)
    
    return button
end

-- Create buttons
local placeBtn = createButton(
    "PlaceBtn",
    "PLACE CAMERA",
    UDim2.new(0.05, 0, 0, 60),
    "ðŸ“·",
    Color3.fromRGB(0, 120, 255)
)

local monitorBtn = createButton(
    "MonitorBtn",
    "MONITOR MODE",
    UDim2.new(0.05, 0, 0, 110),
    "ðŸ‘ï¸",
    Color3.fromRGB(150, 0, 255)
)

local clearBtn = createButton(
    "ClearBtn",
    "CLEAR ALL",
    UDim2.new(0.05, 0, 0, 160),
    "ðŸ—‘ï¸",
    Color3.fromRGB(255, 50, 50)
)

-- Camera list
local camerasLabel = Instance.new("TextLabel")
camerasLabel.Name = "CamerasLabel"
camerasLabel.Size = UDim2.new(0.9, 0, 0, 25)
camerasLabel.Position = UDim2.new(0.05, 0, 0, 210)
camerasLabel.BackgroundTransparency = 1
camerasLabel.Text = "CAMERAS: 0/" .. config.maxCameras
camerasLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
camerasLabel.Font = Enum.Font.GothamBold
camerasLabel.TextSize = 12
camerasLabel.TextXAlignment = Enum.TextXAlignment.Left
camerasLabel.Parent = menu

local camerasList = Instance.new("TextLabel")
camerasList.Name = "CamerasList"
camerasList.Size = UDim2.new(0.9, 0, 0, 60)
camerasList.Position = UDim2.new(0.05, 0, 0, 235)
camerasList.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
camerasList.BackgroundTransparency = 0.3
camerasList.Text = "No cameras placed"
camerasList.TextColor3 = Color3.fromRGB(200, 200, 200)
camerasList.Font = Enum.Font.Gotham
camerasList.TextSize = 11
camerasList.TextWrapped = true
camerasList.TextXAlignment = Enum.TextXAlignment.Left
camerasList.Parent = menu

local camerasCorner = Instance.new("UICorner")
camerasCorner.CornerRadius = UDim.new(0, 8)
camerasCorner.Parent = camerasList

-- Status
local status = Instance.new("TextLabel")
status.Name = "Status"
status.Size = UDim2.new(0.9, 0, 0, 30)
status.Position = UDim2.new(0.05, 0, 0, 310)
status.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
status.BackgroundTransparency = 0.3
status.Text = "READY TO PLACE CAMERAS"
status.TextColor3 = Color3.fromRGB(255, 255, 255)
status.Font = Enum.Font.Gotham
status.TextSize = 11
status.TextWrapped = true
status.Parent = menu

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = status

-- Toggle menu button
local menuToggleBtn = Instance.new("TextButton")
menuToggleBtn.Name = "MenuToggleBtn"
menuToggleBtn.Size = UDim2.new(0, 40, 0, 40)
menuToggleBtn.Position = UDim2.new(0, 270, 0.5, -20)
menuToggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
menuToggleBtn.Text = "â—€"
menuToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
menuToggleBtn.Font = Enum.Font.GothamBold
menuToggleBtn.TextSize = 18
menuToggleBtn.Parent = gui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(1, 0)
toggleCorner.Parent = menuToggleBtn

-- Monitor GUI (hidden by default)
local monitorGui = Instance.new("Frame")
monitorGui.Name = "MonitorGui"
monitorGui.Size = UDim2.new(1, 0, 1, 0)
monitorGui.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
monitorGui.BackgroundTransparency = 0.1
monitorGui.Visible = false
monitorGui.Parent = gui

-- Camera info overlay (top right)
local cameraInfo = Instance.new("Frame")
cameraInfo.Name = "CameraInfo"
cameraInfo.Size = UDim2.new(0, 200, 0, 80)
cameraInfo.Position = UDim2.new(1, -210, 0, 10)
cameraInfo.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
cameraInfo.BackgroundTransparency = 0.7
cameraInfo.Parent = monitorGui

local infoCorner = Instance.new("UICorner")
infoCorner.CornerRadius = UDim.new(0, 10)
infoCorner.Parent = cameraInfo

local cameraTitle = Instance.new("TextLabel")
cameraTitle.Name = "CameraTitle"
cameraTitle.Size = UDim2.new(1, -10, 0, 30)
cameraTitle.Position = UDim2.new(0, 10, 0, 5)
cameraTitle.BackgroundTransparency = 1
cameraTitle.Text = "CAMERA 0"
cameraTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
cameraTitle.Font = Enum.Font.GothamBold
cameraTitle.TextSize = 18
cameraTitle.TextXAlignment = Enum.TextXAlignment.Left
cameraTitle.Parent = cameraInfo

local cameraPosition = Instance.new("TextLabel")
cameraPosition.Name = "CameraPosition"
cameraPosition.Size = UDim2.new(1, -10, 0, 20)
cameraPosition.Position = UDim2.new(0, 10, 0, 35)
cameraPosition.BackgroundTransparency = 1
cameraPosition.Text = "X:0 Y:0 Z:0"
cameraPosition.TextColor3 = Color3.fromRGB(200, 200, 200)
cameraPosition.Font = Enum.Font.Gotham
cameraPosition.TextSize = 12
cameraPosition.TextXAlignment = Enum.TextXAlignment.Left
cameraPosition.Parent = cameraInfo

local cameraControls = Instance.new("TextLabel")
cameraControls.Name = "CameraControls"
cameraControls.Size = UDim2.new(1, -10, 0, 20)
cameraControls.Position = UDim2.new(0, 10, 0, 55)
cameraControls.BackgroundTransparency = 1
cameraControls.Text = "WASD: Move | QE: Zoom | â†â†’: Switch"
cameraControls.TextColor3 = Color3.fromRGB(150, 150, 255)
cameraControls.Font = Enum.Font.Gotham
cameraControls.TextSize = 11
cameraControls.TextXAlignment = Enum.TextXAlignment.Left
cameraControls.Parent = cameraInfo

-- Camera functions
local function createCameraVisual(position, index)
    -- Create camera model
    local cameraModel = Instance.new("Part")
    cameraModel.Name = "SecurityCamera_" .. index
    cameraModel.Size = Vector3.new(1, 1, 1)
    cameraModel.Position = position
    cameraModel.Anchored = true
    cameraModel.CanCollide = false
    cameraModel.Material = EnumMaterial.Metal
    cameraModel.Color = Color3.fromRGB(50, 50, 50)
    
    -- Camera body
    local body = Instance.new("Part")
    body.Name = "Body"
    body.Size = Vector3.new(0.5, 0.5, 0.5)
    body.Position = position + Vector3.new(0, 0.5, 0)
    body.Anchored = true
    body.CanCollide = false
    body.Material = EnumMaterial.Metal
    body.Color = Color3.fromRGB(30, 30, 30)
    body.Parent = cameraModel
    
    -- Camera lens
    local lens = Instance.new("Part")
    lens.Name = "Lens"
    lens.Size = Vector3.new(0.2, 0.2, 0.2)
    lens.Position = position + Vector3.new(0, 0.5, 0.3)
    lens.Anchored = true
    lens.CanCollide = false
    lens.Material = EnumMaterial.Glass
    lens.Color = Color3.fromRGB(0, 100, 255)
    lens.Transparency = 0.3
    lens.Parent = cameraModel
    
    -- Light to indicate active camera
    local light = Instance.new("PointLight")
    light.Name = "CameraLight"
    light.Color = Color3.fromRGB(0, 100, 255)
    light.Brightness = 0
    light.Range = 5
    light.Parent = cameraModel
    
    cameraModel.Parent = Workspace
    
    -- Store camera data
    local cameraData = {
        model = cameraModel,
        position = position,
        index = index,
        rotation = Vector2.new(0, 0),
        offset = Vector3.new(0, 0, -10),
        fov = config.cameraFOV
    }
    
    return cameraData
end

local function updateCamerasList()
    local count = #state.cameras
    camerasLabel.Text = "CAMERAS: " .. count .. "/" .. config.maxCameras
    
    if count == 0 then
        camerasList.Text = "No cameras placed"
    else
        local listText = ""
        for i, cam in ipairs(state.cameras) do
            listText = listText .. "ðŸ“· Camera " .. i .. "\n"
        end
        camerasList.Text = listText
    end
end

local function placeCamera()
    if #state.cameras >= config.maxCameras then
        status.Text = "MAX CAMERAS REACHED (" .. config.maxCameras .. ")"
        return
    end
    
    local character = player.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local cameraPosition = hrp.Position + Vector3.new(0, 5, 0)
    local index = #state.cameras + 1
    
    local cameraData = createCameraVisual(cameraPosition, index)
    table.insert(state.cameras, cameraData)
    
    status.Text = "ðŸ“· CAMERA " .. index .. " PLACED"
    updateCamerasList()
end

local function clearAllCameras()
    for i, cam in ipairs(state.cameras) do
        if cam.model then
            cam.model:Destroy()
        end
    end
    
    state.cameras = {}
    state.currentCamera = nil
    state.cameraIndex = 0
    
    updateCamerasList()
    status.Text = "ALL CAMERAS CLEARED"
end

local function switchCamera(direction)
    if #state.cameras == 0 then return end
    
    if direction == "next" then
        state.cameraIndex = state.cameraIndex + 1
        if state.cameraIndex > #state.cameras then
            state.cameraIndex = 1
        end
    elseif direction == "prev" then
        state.cameraIndex = state.cameraIndex - 1
        if state.cameraIndex < 1 then
            state.cameraIndex = #state.cameras
        end
    end
    
    state.currentCamera = state.cameras[state.cameraIndex]
    
    -- Update camera info
    if state.currentCamera and state.isMonitoring then
        cameraTitle.Text = "ðŸ“· CAMERA " .. state.cameraIndex
        local pos = state.currentCamera.position
        cameraPosition.Text = string.format("X:%d Y:%d Z:%d", 
            math.floor(pos.X), math.floor(pos.Y), math.floor(pos.Z))
        
        -- Update camera lights
        for i, cam in ipairs(state.cameras) do
            local light = cam.model:FindFirstChild("CameraLight")
            if light then
                light.Brightness = (i == state.cameraIndex) and 3 or 0
            end
        end
    end
end

local function startMonitoring()
    if #state.cameras == 0 then
        status.Text = "NO CAMERAS TO MONITOR"
        return
    end
    
    state.isMonitoring = true
    state.cameraIndex = 1
    state.currentCamera = state.cameras[1]
    
    -- Switch to Scriptable camera
    local camera = Workspace.CurrentCamera
    camera.CameraType = Enum.CameraType.Scriptable
    
    -- Show monitor GUI
    monitorGui.Visible = true
    monitorBtn.Text = "â¹ï¸ EXIT MONITOR"
    
    -- Update camera info
    cameraTitle.Text = "ðŸ“· CAMERA " .. state.cameraIndex
    local pos = state.currentCamera.position
    cameraPosition.Text = string.format("X:%d Y:%d Z:%d", 
        math.floor(pos.X), math.floor(pos.Y), math.floor(pos.Z))
    
    -- Turn on light for current camera
    for i, cam in ipairs(state.cameras) do
        local light = cam.model:FindFirstChild("CameraLight")
        if light then
            light.Brightness = (i == state.cameraIndex) and 3 or 0
        end
    end
    
    status.Text = "MONITORING MODE ACTIVE"
end

local function stopMonitoring()
    state.isMonitoring = false
    state.currentCamera = nil
    
    -- Return to normal camera
    local camera = Workspace.CurrentCamera
    camera.CameraType = Enum.CameraType.Custom
    
    -- Hide monitor GUI
    monitorGui.Visible = false
    monitorBtn.Text = "ðŸ‘ï¸ MONITOR MODE"
    
    -- Turn off all camera lights
    for _, cam in ipairs(state.cameras) do
        local light = cam.model:FindFirstChild("CameraLight")
        if light then
            light.Brightness = 0
        end
    end
    
    status.Text = "EXITED MONITOR MODE"
end

local function toggleMonitoring()
    if state.isMonitoring then
        stopMonitoring()
    else
        startMonitoring()
    end
end

-- Camera movement in monitor mode
local monitorConnection
local function setupMonitorControls()
    if monitorConnection then
        monitorConnection:Disconnect()
    end
    
    monitorConnection = RunService.RenderStepped:Connect(function(delta)
        if not state.isMonitoring or not state.currentCamera then return end
        
        local camera = Workspace.CurrentCamera
        
        -- Calculate camera position based on offset and rotation
        local camData = state.currentCamera
        local basePos = camData.position
        
        -- Apply rotation to offset
        local yaw = camData.rotation.X
        local pitch = camData.rotation.Y
        
        local offset = camData.offset * state.zoomLevel
        
        -- Rotate offset based on yaw and pitch
        local rotCFrame = CFrame.fromEulerAnglesYXZ(pitch, yaw, 0)
        local rotatedOffset = rotCFrame:PointToWorldSpace(offset)
        
        local cameraPos = basePos + rotatedOffset
        
        -- Set camera position and look at base position
        camera.CFrame = CFrame.new(cameraPos, basePos)
        camera.FieldOfView = camData.fov / state.zoomLevel
        
        -- Handle keyboard controls
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            camData.rotation = Vector2.new(
                camData.rotation.X - delta * config.panSpeed,
                camData.rotation.Y
            )
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            camData.rotation = Vector2.new(
                camData.rotation.X + delta * config.panSpeed,
                camData.rotation.Y
            )
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            camData.rotation = Vector2.new(
                camData.rotation.X,
                math.max(camData.rotation.Y - delta * config.panSpeed, -1.5)
            )
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            camData.rotation = Vector2.new(
                camData.rotation.X,
                math.min(camData.rotation.Y + delta * config.panSpeed, 1.5)
            )
        end
        
        -- Zoom controls
        if UserInputService:IsKeyDown(Enum.KeyCode.Q) then
            state.zoomLevel = math.min(state.zoomLevel + delta * config.zoomSpeed, 5)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.E) then
            state.zoomLevel = math.max(state.zoomLevel - delta * config.zoomSpeed, 0.5)
        end
    end)
end

-- Button events
placeBtn.MouseButton1Click:Connect(placeCamera)
monitorBtn.MouseButton1Click:Connect(toggleMonitoring)
clearBtn.MouseButton1Click:Connect(clearAllCameras)

-- Camera switching in monitor mode
UserInputService.InputBegan:Connect(function(input, processed)
    if not state.isMonitoring or processed then return end
    
    if input.KeyCode == Enum.KeyCode.Right then
        switchCamera("next")
    elseif input.KeyCode == Enum.KeyCode.Left then
        switchCamera("prev")
    elseif input.KeyCode == Enum.KeyCode.R then
        -- Reset camera rotation and zoom
        if state.currentCamera then
            state.currentCamera.rotation = Vector2.new(0, 0)
            state.zoomLevel = 1
        end
    end
end)

-- Toggle menu
menuToggleBtn.MouseButton1Click:Connect(function()
    state.menuVisible = not state.menuVisible
    
    if state.menuVisible then
        menu.Position = UDim2.new(0, 10, 0.5, -175)
        menuToggleBtn.Position = UDim2.new(0, 270, 0.5, -20)
        menuToggleBtn.Text = "â—€"
    else
        menu.Position = UDim2.new(-1, 0, 0.5, -175)
        menuToggleBtn.Position = UDim2.new(0, 10, 0.5, -20)
        menuToggleBtn.Text = "â–¶"
    end
end)

-- Setup monitor controls when monitoring starts
setupMonitorControls()

-- Cleanup
gui.Destroying:Connect(function()
    if monitorConnection then
        monitorConnection:Disconnect()
    end
    clearAllCameras()
end)

print("Security Camera System by sherikyt loaded")
print("Place up to 5 cameras and monitor them!")
