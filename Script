-- Free Camera Mobile System by sherikyt
-- For mobile devices - Works with Scriptware Mobile

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")

-- Configuration
local CONFIG = {
    MoveSpeed = 8,
    Sensitivity = 0.5,
    JoystickSize = 80,
    ButtonSize = 50
}

-- Variables
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local freeCameraEnabled = false
local originalCFrame
local originalCameraType
local cameraCFrame = CFrame.new()

-- Movement
local movementVector = Vector3.new()
local joystickTouch = nil
local lookTouch = nil
local lookDelta = Vector2.new()

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SherikytFreeCam"
screenGui.ResetOnSpawn = false
screenGui.DisplayOrder = 999
screenGui.Parent = StarterGui

-- Toggle Button (Simple design)
local toggleButton = Instance.new("ImageButton")
toggleButton.Name = "ToggleButton"
toggleButton.Image = "rbxassetid://7072717646"
toggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
toggleButton.BackgroundTransparency = 0.2
toggleButton.Position = UDim2.new(0, 20, 0, 20)
toggleButton.Size = UDim2.new(0, CONFIG.ButtonSize, 0, CONFIG.ButtonSize)
toggleButton.ZIndex = 10
toggleButton.Parent = screenGui

-- Status indicator
local statusLight = Instance.new("Frame")
statusLight.Name = "StatusLight"
statusLight.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
statusLight.BorderSizePixel = 0
statusLight.Position = UDim2.new(0.8, 0, 0.8, 0)
statusLight.Size = UDim2.new(0, 10, 0, 10)
statusLight.ZIndex = 11
statusLight.Parent = toggleButton

-- Control Panel
local controlPanel = Instance.new("Frame")
controlPanel.Name = "ControlPanel"
controlPanel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
controlPanel.BackgroundTransparency = 0.1
controlPanel.BorderSizePixel = 1
controlPanel.BorderColor3 = Color3.fromRGB(60, 60, 60)
controlPanel.Position = UDim2.new(0, CONFIG.ButtonSize + 30, 0, 20)
controlPanel.Size = UDim2.new(0, 200, 0, 150)
controlPanel.Visible = false
controlPanel.ZIndex = 9
controlPanel.Parent = screenGui

-- Title
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Text = "FREE CAMERA"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextSize = 14
title.Font = Enum.Font.GothamBold
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, 0, 0, 25)
title.Parent = controlPanel

-- Status text
local statusText = Instance.new("TextLabel")
statusText.Name = "StatusText"
statusText.Text = "OFF"
statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
statusText.TextSize = 12
statusText.Font = Enum.Font.Gotham
statusText.BackgroundTransparency = 1
statusText.Position = UDim2.new(0, 0, 0, 25)
statusText.Size = UDim2.new(1, 0, 0, 20)
statusText.Parent = controlPanel

-- Joystick Area
local joystickFrame = Instance.new("Frame")
joystickFrame.Name = "JoystickFrame"
joystickFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
joystickFrame.BackgroundTransparency = 0.3
joystickFrame.BorderSizePixel = 0
joystickFrame.Position = UDim2.new(0.1, 0, 0.4, 0)
joystickFrame.Size = UDim2.new(0, CONFIG.JoystickSize, 0, CONFIG.JoystickSize)
joystickFrame.Parent = controlPanel

-- Joystick Knob
local joystickKnob = Instance.new("Frame")
joystickKnob.Name = "JoystickKnob"
joystickKnob.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
joystickKnob.BackgroundTransparency = 0.2
joystickKnob.BorderSizePixel = 0
joystickKnob.Size = UDim2.new(0, 30, 0, 30)
joystickKnob.AnchorPoint = Vector2.new(0.5, 0.5)
joystickKnob.Position = UDim2.new(0.5, 0, 0.5, 0)
joystickKnob.Parent = joystickFrame

-- Speed Controls
local speedFrame = Instance.new("Frame")
speedFrame.Name = "SpeedFrame"
speedFrame.BackgroundTransparency = 1
speedFrame.Position = UDim2.new(0.6, 0, 0.4, 0)
speedFrame.Size = UDim2.new(0, 60, 0, CONFIG.JoystickSize)
speedFrame.Parent = controlPanel

local speedText = Instance.new("TextLabel")
speedText.Name = "SpeedText"
speedText.Text = "SPEED: " .. CONFIG.MoveSpeed
speedText.TextColor3 = Color3.fromRGB(255, 255, 255)
speedText.TextSize = 12
speedText.Font = Enum.Font.Gotham
speedText.BackgroundTransparency = 1
speedText.Size = UDim2.new(1, 0, 0, 20)
speedText.Parent = speedFrame

local speedUpBtn = Instance.new("TextButton")
speedUpBtn.Name = "SpeedUpBtn"
speedUpBtn.Text = "+"
speedUpBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
speedUpBtn.TextSize = 16
speedUpBtn.Font = Enum.Font.GothamBold
speedUpBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
speedUpBtn.Position = UDim2.new(0, 0, 0.3, 0)
speedUpBtn.Size = UDim2.new(1, 0, 0, 25)
speedUpBtn.Parent = speedFrame

local speedDownBtn = Instance.new("TextButton")
speedDownBtn.Name = "SpeedDownBtn"
speedDownBtn.Text = "-"
speedDownBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
speedDownBtn.TextSize = 16
speedDownBtn.Font = Enum.Font.GothamBold
speedDownBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
speedDownBtn.Position = UDim2.new(0, 0, 0.7, 0)
speedDownBtn.Size = UDim2.new(1, 0, 0, 25)
speedDownBtn.Parent = speedFrame

-- Instructions
local instructions = Instance.new("TextLabel")
instructions.Name = "Instructions"
instructions.Text = "Drag screen to look around"
instructions.TextColor3 = Color3.fromRGB(180, 180, 180)
instructions.TextSize = 11
instructions.Font = Enum.Font.Gotham
instructions.TextWrapped = true
instructions.BackgroundTransparency = 1
instructions.Position = UDim2.new(0, 10, 0.8, 0)
instructions.Size = UDim2.new(1, -20, 0, 30)
instructions.Parent = controlPanel

-- Exit Button
local exitButton = Instance.new("TextButton")
exitButton.Name = "ExitButton"
exitButton.Text = "EXIT"
exitButton.TextColor3 = Color3.fromRGB(255, 100, 100)
exitButton.TextSize = 12
exitButton.Font = Enum.Font.GothamBold
exitButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
exitButton.Position = UDim2.new(0, 10, 0.9, 0)
exitButton.Size = UDim2.new(1, -20, 0, 20)
exitButton.Visible = false
exitButton.ZIndex = 10
exitButton.Parent = screenGui

-- Functions
local function enableFreeCamera()
    if freeCameraEnabled then return end
    
    freeCameraEnabled = true
    
    -- Save original state
    originalCFrame = camera.CFrame
    originalCameraType = camera.CameraType
    
    -- Start from current position
    cameraCFrame = camera.CFrame
    
    -- Enable scriptable camera
    camera.CameraType = Enum.CameraType.Scriptable
    
    -- Update UI
    statusLight.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
    toggleButton.BackgroundColor3 = Color3.fromRGB(60, 100, 200)
    statusText.Text = "ON"
    statusText.TextColor3 = Color3.fromRGB(50, 255, 50)
    controlPanel.Visible = true
    exitButton.Visible = true
    
    print("[FreeCam] Enabled")
end

local function disableFreeCamera()
    if not freeCameraEnabled then return end
    
    freeCameraEnabled = false
    
    -- Restore camera
    camera.CameraType = originalCameraType or Enum.CameraType.Custom
    if originalCFrame then
        camera.CFrame = originalCFrame
    end
    
    -- Reset
    movementVector = Vector3.new()
    joystickTouch = nil
    lookTouch = nil
    lookDelta = Vector2.new()
    joystickKnob.Position = UDim2.new(0.5, 0, 0.5, 0)
    
    -- Update UI
    statusLight.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    toggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    statusText.Text = "OFF"
    statusText.TextColor3 = Color3.fromRGB(255, 100, 100)
    controlPanel.Visible = false
    exitButton.Visible = false
    
    print("[FreeCam] Disabled")
end

-- Toggle button
toggleButton.MouseButton1Click:Connect(function()
    if freeCameraEnabled then
        disableFreeCamera()
    else
        enableFreeCamera()
    end
end)

-- Exit button
exitButton.MouseButton1Click:Connect(disableFreeCamera)

-- Speed controls
speedUpBtn.MouseButton1Click:Connect(function()
    CONFIG.MoveSpeed = math.min(CONFIG.MoveSpeed + 2, 20)
    speedText.Text = "SPEED: " .. CONFIG.MoveSpeed
end)

speedDownBtn.MouseButton1Click:Connect(function()
    CONFIG.MoveSpeed = math.max(CONFIG.MoveSpeed - 2, 1)
    speedText.Text = "SPEED: " .. CONFIG.MoveSpeed
end)

-- Joystick input
joystickFrame.InputBegan:Connect(function(input)
    if freeCameraEnabled and input.UserInputType == Enum.UserInputType.Touch and not joystickTouch then
        joystickTouch = input
    end
end)

joystickFrame.InputChanged:Connect(function(input)
    if freeCameraEnabled and joystickTouch and input == joystickTouch then
        local framePos = joystickFrame.AbsolutePosition
        local frameSize = joystickFrame.AbsoluteSize
        local center = framePos + frameSize / 2
        local touchPos = input.Position
        local delta = touchPos - center
        
        local maxDist = CONFIG.JoystickSize / 2 - 15
        local dist = math.min(delta.Magnitude, maxDist)
        local dir = delta.Magnitude > 0 and delta.Unit or Vector2.new(0, 0)
        
        -- Update knob
        joystickKnob.Position = UDim2.new(0.5, dir.X * dist, 0.5, dir.Y * dist)
        
        -- Set movement
        if dist > 5 then
            movementVector = Vector3.new(dir.X, 0, -dir.Y) * (dist / maxDist)
        else
            movementVector = Vector3.new()
        end
    end
end)

joystickFrame.InputEnded:Connect(function(input)
    if input == joystickTouch then
        joystickTouch = nil
        movementVector = Vector3.new()
        joystickKnob.Position = UDim2.new(0.5, 0, 0.5, 0)
    end
end)

-- Look controls (entire screen)
local lastTouchPos = Vector2.new()

screenGui.InputBegan:Connect(function(input)
    if freeCameraEnabled and input.UserInputType == Enum.UserInputType.Touch then
        lookTouch = input
        lastTouchPos = input.Position
    end
end)

screenGui.InputChanged:Connect(function(input)
    if freeCameraEnabled and lookTouch and input == lookTouch then
        local currentPos = input.Position
        lookDelta = currentPos - lastTouchPos
        lastTouchPos = currentPos
    end
end)

screenGui.InputEnded:Connect(function(input)
    if input == lookTouch then
        lookTouch = nil
        lookDelta = Vector2.new()
    end
end)

-- Main camera loop
RunService.RenderStepped:Connect(function(deltaTime)
    if freeCameraEnabled then
        -- Apply rotation
        if lookDelta.Magnitude > 0 then
            local yaw = -lookDelta.X * CONFIG.Sensitivity * 0.02
            local pitch = -lookDelta.Y * CONFIG.Sensitivity * 0.02
            
            -- Apply rotations
            local yawCF = CFrame.fromAxisAngle(Vector3.new(0, 1, 0), yaw)
            local pitchCF = CFrame.fromAxisAngle(cameraCFrame.RightVector, pitch)
            
            cameraCFrame = cameraCFrame * yawCF * pitchCF
        end
        
        -- Apply movement
        if movementVector.Magnitude > 0 then
            local moveAmount = movementVector * CONFIG.MoveSpeed * deltaTime * 60
            
            -- Get camera axes
            local right = cameraCFrame.RightVector
            local forward = cameraCFrame.LookVector
            local up = Vector3.new(0, 1, 0)
            
            -- Calculate movement
            local move = (right * moveAmount.X) + (up * moveAmount.Y) + (forward * moveAmount.Z)
            cameraCFrame = cameraCFrame + move
        end
        
        -- Apply to camera
        camera.CFrame = cameraCFrame
    end
end)

-- Auto cleanup
player.CharacterAdded:Connect(function()
    if freeCameraEnabled then
        disableFreeCamera()
    end
end)

game:GetService("GuiService").MenuOpened:Connect(function()
    if freeCameraEnabled then
        disableFreeCamera()
    end
end)

-- Debug info
print("========================================")
print("Free Camera Mobile v2.0 by sherikyt")
print("Loaded successfully!")
print("Button position: Top Left (20, 20)")
print("Toggle key: Tap camera icon")
print("========================================")

-- Wait for game to load
wait(1)

-- Initial UI setup
exitButton.Position = UDim2.new(0, 20, 0, CONFIG.ButtonSize + 30)
exitButton.Size = UDim2.new(0, CONFIG.ButtonSize, 0, 25)

return "Free Camera Mobile System loaded successfully!"
