-- Black Hole by sherikyt
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

local config = {
    strength = 5000,
    radius = 50,
    suckDist = 200
}

local blackHoleActive = false
local selectedPos = nil
local parts = {}
local holeCore = nil
local holeEvent = nil
local menuVisible = true

-- GUI
local gui = Instance.new("ScreenGui")
gui.Parent = player.PlayerGui

local menu = Instance.new("Frame")
menu.Size = UDim2.new(0, 250, 0, 200)
menu.Position = UDim2.new(0, -230, 0.5, -100)
menu.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
menu.BackgroundTransparency = 0.1
menu.Parent = gui
Instance.new("UICorner", menu).CornerRadius = UDim.new(0, 10)

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 30, 0, 30)
toggleBtn.Position = UDim2.new(1, -35, 0.5, -15)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
toggleBtn.Text = "‚óÄ"
toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 14
toggleBtn.Parent = menu
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1, 0)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -10, 0, 30)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Text = "üåå Black Hole"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = menu

local creator = Instance.new("TextLabel")
creator.Size = UDim2.new(1, -10, 0, 20)
creator.Position = UDim2.new(0, 10, 0, 35)
creator.BackgroundTransparency = 1
creator.Text = "by sherikyt"
creator.TextColor3 = Color3.fromRGB(180, 180, 220)
creator.Font = Enum.Font.Gotham
creator.TextSize = 12
creator.TextXAlignment = Enum.TextXAlignment.Left
creator.Parent = menu

local btnContainer = Instance.new("Frame")
btnContainer.Size = UDim2.new(1, -20, 0, 100)
btnContainer.Position = UDim2.new(0, 10, 0, 60)
btnContainer.BackgroundTransparency = 1
btnContainer.Parent = menu

local function createBtn(name, text, pos, icon)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(1, 0, 0, 40)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    btn.Text = icon .. " " .. text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Parent = btnContainer
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    return btn
end

local selectBtn = createBtn("SelectPos", "Select Position", UDim2.new(0, 0, 0, 0), "üìç")
local holeBtn = createBtn("MakeHole", "Make Blackhole", UDim2.new(0, 0, 0, 50), "üåå")

local status = Instance.new("TextLabel")
status.Size = UDim2.new(1, -20, 0, 40)
status.Position = UDim2.new(0, 10, 0, 170)
status.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
status.BackgroundTransparency = 0.3
status.Text = "üìç Position: Not Selected"
status.TextColor3 = Color3.fromRGB(255, 255, 255)
status.Font = Enum.Font.Gotham
status.TextSize = 12
status.TextWrapped = true
status.Parent = menu
Instance.new("UICorner", status).CornerRadius = UDim.new(0, 8)

-- Functions
local function createMarker(pos)
    if workspace:FindFirstChild("PosMarker") then
        workspace.PosMarker:Destroy()
    end
    
    local marker = Instance.new("Part")
    marker.Name = "PosMarker"
    marker.Size = Vector3.new(2, 2, 2)
    marker.Position = pos
    marker.Anchored = true
    marker.CanCollide = false
    marker.Material = EnumMaterial.Neon
    marker.Color = Color3.fromRGB(0, 200, 255)
    marker.Transparency = 0.3
    marker.Parent = workspace
    return marker
end

local function getParts()
    parts = {}
    for _, part in pairs(Workspace:GetDescendants()) do
        if part:IsA("BasePart") and not part.Anchored and part.Name ~= "PosMarker" then
            if not part:IsDescendantOf(player.Character) then
                if selectedPos then
                    local dist = (part.Position - selectedPos).Magnitude
                    if dist <= config.suckDist then
                        table.insert(parts, part)
                    end
                else
                    table.insert(parts, part)
                end
            end
        end
    end
    return parts
end

local function makeBlackHole()
    if not selectedPos then
        status.Text = "‚ùå Select position first!"
        return
    end
    
    if blackHoleActive then
        if holeCore then holeCore:Destroy() end
        if holeEvent then holeEvent:Disconnect() end
        
        for _, part in pairs(parts) do
            if part then
                local v = part:FindFirstChild("BH_Vel")
                local g = part:FindFirstChild("BH_Gyro")
                if v then v:Destroy() end
                if g then g:Destroy() end
            end
        end
        
        parts = {}
        blackHoleActive = false
        holeBtn.Text = "üåå Make Blackhole"
        return
    end
    
    local collected = getParts()
    if #collected == 0 then
        status.Text = "‚ö†Ô∏è No parts found!"
        return
    end
    
    blackHoleActive = true
    holeBtn.Text = "‚èπÔ∏è Stop Blackhole"
    
    -- Visual core
    holeCore = Instance.new("Part")
    holeCore.Name = "BlackHoleCore"
    holeCore.Size = Vector3.new(5, 5, 5)
    holeCore.Position = selectedPos
    holeCore.Anchored = true
    holeCore.CanCollide = false
    holeCore.Color = Color3.fromRGB(0, 0, 0)
    holeCore.Transparency = 0.3
    holeCore.Parent = workspace
    
    holeEvent = RunService.Heartbeat:Connect(function()
        if not blackHoleActive then return end
        
        for _, part in pairs(parts) do
            if part and part.Parent then
                local dist = (part.Position - selectedPos).Magnitude
                
                if dist <= config.suckDist then
                    local vel = part:FindFirstChild("BH_Vel") or Instance.new("BodyVelocity")
                    local gyro = part:FindFirstChild("BH_Gyro") or Instance.new("BodyGyro")
                    
                    if not part:FindFirstChild("BH_Vel") then
                        vel.Name = "BH_Vel"
                        vel.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                        vel.P = 10000
                        vel.Parent = part
                        
                        gyro.Name = "BH_Gyro"
                        gyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
                        gyro.P = 10000
                        gyro.Parent = part
                    end
                    
                    local dir = (selectedPos - part.Position).Unit
                    local force = config.strength * (1 - dist / config.suckDist)
                    local tangent = dir:Cross(Vector3.new(0, 1, 0)).Unit
                    local orbit = 50 * (config.radius / math.max(dist, 1))
                    
                    vel.Velocity = dir * force + tangent * orbit
                    
                    if dist < 5 then
                        part.Transparency = part.Transparency + 0.05
                        if part.Transparency >= 1 then
                            part:Destroy()
                        end
                    end
                end
            end
        end
    end)
    
    status.Text = "‚úÖ Black Hole Active! Parts: " .. #collected
end

-- Button events
selectBtn.MouseButton1Click:Connect(function()
    selectedPos = player.Character and player.Character:FindFirstChild("HumanoidRootPart") and 
                  player.Character.HumanoidRootPart.Position or mouse.Hit.p
    
    createMarker(selectedPos)
    status.Text = string.format("üìç Selected\nX: %.1f, Y: %.1f, Z: %.1f", 
        selectedPos.X, selectedPos.Y, selectedPos.Z)
end)

holeBtn.MouseButton1Click:Connect(makeBlackHole)

-- Toggle menu
toggleBtn.MouseButton1Click:Connect(function()
    menuVisible = not menuVisible
    if menuVisible then
        menu.Position = UDim2.new(0, -230, 0.5, -100)
        toggleBtn.Text = "‚óÄ"
    else
        menu.Position = UDim2.new(0, -250, 0.5, -100)
        toggleBtn.Text = "‚ñ∂"
    end
end)

-- Cleanup
gui.Destroying:Connect(function()
    if holeEvent then holeEvent:Disconnect() end
    if workspace:FindFirstChild("PosMarker") then
        workspace.PosMarker:Destroy()
    end
    if holeCore then holeCore:Destroy() end
end)

print("Black Hole by sherikyt loaded!")
