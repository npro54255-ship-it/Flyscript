-- The Forge: FIXED Craft Luck & Rare Ore Script

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local localPlayer = Players.LocalPlayer
local playerGui = localPlayer:WaitForChild("PlayerGui")

-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π GUI –µ—Å–ª–∏ –µ—Å—Ç—å
if playerGui:FindFirstChild("ForgeLuckHUD") then
    playerGui.ForgeLuckHUD:Destroy()
end

-- –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ForgeLuckHUD"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 250, 0, 110)
MainFrame.Position = UDim2.new(0, 15, 0, 120)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 10, 25)
MainFrame.BackgroundTransparency = 0.1
MainFrame.BorderSizePixel = 0

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

local LuckButton = Instance.new("TextButton")
LuckButton.Name = "LuckButton"
LuckButton.Size = UDim2.new(0.9, 0, 0.6, 0)
LuckButton.Position = UDim2.new(0.05, 0, 0.1, 0)
LuckButton.BackgroundColor3 = Color3.fromRGB(120, 20, 180)
LuckButton.Text = "üé≤ OFF - –ù–∞–∂–º–∏ –¥–ª—è —É–¥–∞—á–∏"
LuckButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LuckButton.TextScaled = true
LuckButton.Font = Enum.Font.GothamBlack
LuckButton.TextStrokeTransparency = 0.5

local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(0, 8)
ButtonCorner.Parent = LuckButton

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(1, 0, 0.25, 0)
StatusLabel.Position = UDim2.new(0, 0, 0.75, 0)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "–ì–æ—Ç–æ–≤ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏..."
StatusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
StatusLabel.TextSize = 14

-- –°–æ–±–∏—Ä–∞–µ–º GUI
LuckButton.Parent = MainFrame
StatusLabel.Parent = MainFrame
MainFrame.Parent = ScreenGui
ScreenGui.Parent = playerGui

-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local luckActive = false
local luckMultiplier = 99999
local originalRandom = math.random
local originalRandomseed = math.randomseed

-- –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ü–ï–†–ï–•–í–ê–¢–ß–ò–ö –£–î–ê–ß–ò
local function setupGlobalLuck()
    -- 1. –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º math.random
    math.random = function(a, b)
        if luckActive then
            -- –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–¥–∫–æ—Å—Ç–∏ (–º–∞–ª—ã–µ —á–∏—Å–ª–∞)
            if not b then
                -- –ï—Å–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (0-1)
                return 0.99
            elseif b and b <= 100 then
                -- –î–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö —à–∞–Ω—Å–æ–≤
                if a and a == 1 then
                    -- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (95-100)
                    return 95 + math.floor(originalRandom() * 6)
                end
                -- –î–ª—è —Ä–µ–¥–∫–æ—Å—Ç–∏: –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ä–µ–¥–∫–æ—Å—Ç—å
                if b <= 10 then
                    return b -- –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å
                end
            end
        end
        return originalRandom(a, b)
    end
    
    -- 2. –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º randomseed –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è
    math.randomseed = function(seed)
        if luckActive then
            -- –§–∏–∫—Å–∏—Ä—É–µ–º —Å–∏–¥ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö —Ä–µ–¥–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            return originalRandomseed(999888777)
        end
        return originalRandomseed(seed)
    end
    
    -- 3. –ò—â–µ–º –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –í–°–ï RemoteEvent –≤ –∏–≥—Ä–µ
    local function hookAllRemotes()
        local hookedCount = 0
        
        for _, obj in pairs(game:GetDescendants()) do
            if obj:IsA("RemoteEvent") then
                local originalFire = obj.FireServer
                obj.FireServer = function(self, ...)
                    local args = {...}
                    
                    if luckActive then
                        -- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
                        local arg1 = args[1]
                        local remoteName = obj.Name:lower()
                        
                        -- –î–û–ë–´–ß–ê –†–£–î–´
                        if remoteName:find("mine") or remoteName:find("ore") or 
                           remoteName:find("rock") or remoteName:find("collect") then
                            
                            StatusLabel.Text = "‚õèÔ∏è –î–æ–±—ã—á–∞: –õ–ï–ì–ï–ù–î–ê–†–ù–ê–Ø"
                            
                            -- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–µ–¥–∫–æ—Å—Ç–∏
                            if type(arg1) == "table" then
                                arg1.rarity = "Legendary"
                                arg1.tier = 5
                                arg1.quality = 100
                                arg1.luckBoost = luckMultiplier
                            end
                            
                            -- –î–æ–±–∞–≤–ª—è–µ–º –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π —Ç–µ–≥
                            args[#args + 1] = "LEGENDARY_FORCED"
                        end
                        
                        -- –ö–†–ê–§–¢ –ü–†–ï–î–ú–ï–¢–û–í
                        if remoteName:find("craft") or remoteName:find("forge") or 
                           remoteName:find("create") or remoteName:find("smith") then
                            
                            StatusLabel.Text = "üî• –ö—Ä–∞—Ñ—Ç: –ò–î–ï–ê–õ–¨–ù–´–ô"
                            
                            if type(arg1) == "table" then
                                arg1.success = true
                                arg1.quality = 100
                                arg1.rarity = "Legendary"
                                arg1.bonusStats = {luck = luckMultiplier}
                            end
                        end
                    end
                    
                    -- –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
                    return originalFire(self, unpack(args))
                end
                
                hookedCount = hookedCount + 1
            end
        end
        
        return hookedCount
    end
    
    -- 4. –ú–µ–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—ã –ª—É—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    local function modifyLootTables()
        for _, obj in pairs(game:GetDescendants()) do
            if obj:IsA("ModuleScript") then
                pcall(function()
                    local config = require(obj)
                    if type(config) == "table" then
                        -- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —à–∞–Ω—Å—ã –≤—ã–ø–∞–¥–µ–Ω–∏—è
                        if config.Rarities then
                            for _, rarity in pairs(config.Rarities) do
                                if luckActive then
                                    if rarity.name:lower():find("common") or 
                                       rarity.name:lower():find("uncommon") then
                                        rarity.chance = 0 -- –û–±—ã—á–Ω—ã–µ –Ω–µ –≤—ã–ø–∞–¥–∞—é—Ç
                                    elseif rarity.name:lower():find("legendary") or 
                                           rarity.name:lower():find("mythic") or
                                           rarity.name:lower():find("divine") then
                                        rarity.chance = 100 -- –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –≤—Å–µ–≥–¥–∞
                                    end
                                end
                            end
                        end
                    end
                end)
            end
        end
    end
    
    -- –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–µ—Ö–≤–∞—Ç
    local hooked = hookAllRemotes()
    modifyLootTables()
    
    return hooked
end

-- –§—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —É–¥–∞—á–∏
local function toggleLuck()
    luckActive = not luckActive
    
    if luckActive then
        -- –ê–ö–¢–ò–í–ê–¶–ò–Ø –£–î–ê–ß–ò
        LuckButton.BackgroundColor3 = Color3.fromRGB(0, 180, 50)
        LuckButton.Text = "‚úÖ –£–î–ê–ß–ê –í–ö–õ–Æ–ß–ï–ù–ê"
        StatusLabel.TextColor3 = Color3.fromRGB(50, 255, 50)
        
        -- –ü—Ä–∏–º–µ–Ω—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é —É–¥–∞—á—É
        local hookedCount = setupGlobalLuck()
        StatusLabel.Text = "–ê–∫—Ç–∏–≤–Ω–æ! –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ: " .. hookedCount .. " —Å–æ–±—ã—Ç–∏–π"
        
        -- –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
        spawn(function()
            while luckActive do
                LuckButton.BackgroundTransparency = 0.1
                wait(0.3)
                LuckButton.BackgroundTransparency = 0
                wait(0.3)
            end
        end)
        
        -- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        game.StarterGui:SetCore("SendNotification", {
            Title = "–£–î–ê–ß–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê",
            Text = "–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã",
            Duration = 5
        })
        
    else
        -- –î–ï–ê–ö–¢–ò–í–ê–¶–ò–Ø –£–î–ê–ß–ò
        LuckButton.BackgroundColor3 = Color3.fromRGB(120, 20, 180)
        LuckButton.Text = "üé≤ OFF - –ù–∞–∂–º–∏ –¥–ª—è —É–¥–∞—á–∏"
        StatusLabel.Text = "–£–¥–∞—á–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞"
        StatusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
        
        -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        math.random = originalRandom
        math.randomseed = originalRandomseed
        
        game.StarterGui:SetCore("SendNotification", {
            Title = "–£–¥–∞—á–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞",
            Text = "–®–∞–Ω—Å—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º",
            Duration = 3
        })
    end
end

-- –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–Ω–æ–ø–∫—É
LuckButton.MouseButton1Click:Connect(toggleLuck)

-- –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
spawn(function()
    wait(2)
    StatusLabel.Text = "–ì–æ—Ç–æ–≤! –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏"
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    setupGlobalLuck()
end)

-- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
spawn(function()
    while true do
        wait(5)
        
        if luckActive then
            -- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —É–¥–∞—á—É
            setupGlobalLuck()
            
            -- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
            local leaderstats = localPlayer:FindFirstChild("leaderstats")
            if leaderstats then
                pcall(function()
                    -- –ò—â–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É–¥–∞—á–∏
                    for _, stat in pairs(leaderstats:GetChildren()) do
                        if stat:IsA("IntValue") or stat:IsA("NumberValue") then
                            local nameLower = stat.Name:lower()
                            if nameLower:find("luck") or nameLower:find("quality") then
                                stat.Value = luckMultiplier
                            end
                        end
                    end
                end)
            end
        end
    end
end)

print("=======================================")
print("üîß The Forge Luck Script –ó–ê–ì–†–£–ñ–ï–ù")
print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π")
print("üéØ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã")
print("‚ùå –û–±—ã—á–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –≤—ã–ø–∞–¥–∞—é—Ç")
print("=======================================")
print("–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É 'üé≤ OFF' –≤ –∏–≥—Ä–µ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏!")
