-- Camera Control by sherikyt - Ð£Ð»ÑŒÑ‚Ñ€Ð° ÐºÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ñ‹Ð¹
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local camera = Workspace.CurrentCamera
local mouse = player:GetMouse()

-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ GUI
local gui = Instance.new("ScreenGui")
gui.Parent = player:WaitForChild("PlayerGui")

local main = Instance.new("Frame")
main.Size = UDim2.new(0, 200, 0, 220)
main.Position = UDim2.new(0, 10, 0, 10)
main.BackgroundColor3 = Color3.fromRGB(30, 30, 50)
main.BorderSizePixel = 0
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 10)
main.Parent = gui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundColor3 = Color3.fromRGB(50, 50, 80)
title.Text = "ðŸ“¸ Camera Control"
title.TextColor3 = Color3.white
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.Parent = main

-- Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð¼ÐµÑ‚Ð¾Ðº
local counter = Instance.new("TextLabel")
counter.Size = UDim2.new(1, 0, 0, 30)
counter.Position = UDim2.new(0, 0, 0.85, 0)
counter.BackgroundTransparency = 1
counter.Text = "Marks: 0/10"
counter.TextColor3 = Color3.fromRGB(200, 200, 255)
counter.Font = Enum.Font.Gotham
counter.TextSize = 14
counter.Parent = main

-- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸
local buttons = {
    {name="Free", text="FREE CAM", color=Color3.fromRGB(70, 130, 200), pos=UDim2.new(0.05,0,0.2,0)},
    {name="Mark", text="PLACE MARK", color=Color3.fromRGB(60, 200, 100), pos=UDim2.new(0.55,0,0.2,0)},
    {name="View", text="VIEW MARKS", color=Color3.fromRGB(255, 165, 50), pos=UDim2.new(0.05,0,0.5,0)},
    {name="Clear", text="CLEAR ALL", color=Color3.fromRGB(220, 60, 60), pos=UDim2.new(0.55,0,0.5,0)}
}

for _, btn in pairs(buttons) do
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.4, 0, 0.25, 0)
    button.Position = btn.pos
    button.BackgroundColor3 = btn.color
    button.Text = btn.text
    button.TextColor3 = Color3.white
    button.Font = Enum.Font.GothamBold
    button.TextSize = 12
    button.AutoButtonColor = false
    Instance.new("UICorner", button).CornerRadius = UDim.new(0, 8)
    button.Parent = main
end

-- Ð¡Ñ‚ÐµÐ¹Ñ‚Ñ‹
local marks = {}
local freeCam = false
local viewMode = false
local currentMark = 0
local camYaw = 0
local camPitch = 0
local move = {W=false,A=false,S=false,D=false,Q=false,E=false}
local speed = 25

-- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸
local function updateCounter()
    counter.Text = "Marks: "..#marks.."/10"
end

local function createMarker(pos)
    if #marks >= 10 then return end
    local m = Instance.new("Part")
    m.Size = Vector3.new(2, 2, 2)
    m.Position = pos
    m.Anchored = true
    m.CanCollide = false
    m.Color = Color3.fromRGB(0, 200, 255)
    m.Transparency = 0.3
    m.Parent = Workspace
    marks[#marks+1] = {position=pos, part=m}
    updateCounter()
end

local function clearMarks()
    for _, mark in pairs(marks) do
        mark.part:Destroy()
    end
    marks = {}
    currentMark = 0
    updateCounter()
end

local function viewMark(index)
    if #marks == 0 then return end
    currentMark = math.clamp(index, 1, #marks)
    local mark = marks[currentMark]
    camera.CFrame = CFrame.new(mark.position + Vector3.new(0, 5, 10), mark.position)
end

local function toggleFreeCam()
    freeCam = not freeCam
    viewMode = false
    if freeCam then
        camera.CameraType = Enum.CameraType.Scriptable
        main.Free.Text = "EXIT CAM"
    else
        camera.CameraType = Enum.CameraType.Custom
        main.Free.Text = "FREE CAM"
    end
end

local function toggleView()
    if #marks == 0 then return end
    viewMode = not viewMode
    freeCam = false
    if viewMode then
        camera.CameraType = Enum.CameraType.Scriptable
        viewMark(1)
        main.View.Text = "EXIT VIEW"
    else
        camera.CameraType = Enum.CameraType.Custom
        main.View.Text = "VIEW MARKS"
    end
end

-- ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÐºÐ½Ð¾Ð¿Ð¾Ðº
main.Free.MouseButton1Click:Connect(toggleFreeCam)
main.Mark.MouseButton1Click:Connect(function() if freeCam then createMarker(camera.CFrame.Position) end end)
main.View.MouseButton1Click:Connect(toggleView)
main.Clear.MouseButton1Click:Connect(clearMarks)

-- ÐšÐ»Ð°Ð²Ð¸ÑˆÐ¸
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F then toggleFreeCam()
    elseif input.KeyCode == Enum.KeyCode.M and freeCam then createMarker(camera.CFrame.Position)
    elseif input.KeyCode == Enum.KeyCode.V then toggleView()
    elseif input.KeyCode == Enum.KeyCode.C then clearMarks()
    elseif input.KeyCode == Enum.KeyCode.LeftBracket then speed = math.max(10, speed-5)
    elseif input.KeyCode == Enum.KeyCode.RightBracket then speed = math.min(50, speed+5)
    end
    
    if freeCam then
        if input.KeyCode == Enum.KeyCode.W then move.W = true
        elseif input.KeyCode == Enum.KeyCode.A then move.A = true
        elseif input.KeyCode == Enum.KeyCode.S then move.S = true
        elseif input.KeyCode == Enum.KeyCode.D then move.D = true
        elseif input.KeyCode == Enum.KeyCode.Q then move.Q = true
        elseif input.KeyCode == Enum.KeyCode.E then move.E = true
        end
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if freeCam then
        if input.KeyCode == Enum.KeyCode.W then move.W = false
        elseif input.KeyCode == Enum.KeyCode.A then move.A = false
        elseif input.KeyCode == Enum.KeyCode.S then move.S = false
        elseif input.KeyCode == Enum.KeyCode.D then move.D = false
        elseif input.KeyCode == Enum.KeyCode.Q then move.Q = false
        elseif input.KeyCode == Enum.KeyCode.E then move.E = false
        end
    end
end)

-- Ð’Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð¼Ñ‹ÑˆÑŒÑŽ
local lastMousePos
UserInputService.InputChanged:Connect(function(input)
    if freeCam and input.UserInputType == Enum.UserInputType.MouseMovement then
        if UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
            if not lastMousePos then lastMousePos = input.Position return end
            local delta = input.Position - lastMousePos
            camYaw = camYaw - delta.X * 0.003
            camPitch = camPitch - delta.Y * 0.003
            camPitch = math.clamp(camPitch, -1.5, 1.5)
            lastMousePos = input.Position
        else lastMousePos = nil end
    end
end)

-- ÐšÐ¾Ð»ÐµÑÐ¸ÐºÐ¾ Ð¼Ñ‹ÑˆÐ¸
mouse.WheelForward:Connect(function() if freeCam then speed = math.min(50, speed+5) end end)
mouse.WheelBackward:Connect(function() if freeCam then speed = math.max(10, speed-5) end end)

-- Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ»
RunService.Heartbeat:Connect(function(dt)
    if freeCam then
        local rot = CFrame.fromOrientation(camPitch, camYaw, 0)
        local moveVec = Vector3.new(0,0,0)
        if move.W then moveVec = moveVec + Vector3.new(0,0,-1) end
        if move.S then moveVec = moveVec + Vector3.new(0,0,1) end
        if move.D then moveVec = moveVec + Vector3.new(1,0,0) end
        if move.A then moveVec = moveVec + Vector3.new(-1,0,0) end
        if move.E then moveVec = moveVec + Vector3.new(0,1,0) end
        if move.Q then moveVec = moveVec + Vector3.new(0,-1,0) end
        
        if moveVec.Magnitude > 0 then
            moveVec = moveVec.Unit * speed * dt
            local rotated = rot:VectorToWorldSpace(moveVec)
            camera.CFrame = rot + camera.CFrame.Position + rotated
        else
            camera.CFrame = rot + camera.CFrame.Position
        end
        camera.FieldOfView = 70
        
    elseif viewMode and #marks > 0 then
        local mark = marks[currentMark]
        if mark then
            local time = tick()
            local x = math.cos(time * 0.5) * 10
            local z = math.sin(time * 0.5) * 10
            local target = mark.position + Vector3.new(x, 5, z)
            camera.CFrame = camera.CFrame:Lerp(CFrame.new(target, mark.position), 5*dt)
            camera.FieldOfView = 60
        end
    end
end)

print("Camera Control by sherikyt loaded!")
