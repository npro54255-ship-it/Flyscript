-- Fly Script by sherikyt
-- Created with enhanced UI and controls

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Configuration
local flySpeed = 50
local isFlying = false
local flightVelocity = Vector3.new(0, 0, 0)
local connection

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FlyScriptUI"
screenGui.Parent = player.PlayerGui

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 350, 0, 280)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -140)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui

-- Corner for main frame
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- Gradient Background
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 30))
})
gradient.Rotation = 45
gradient.Parent = mainFrame

-- Title Bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 40)
titleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
titleBar.BackgroundTransparency = 0.3
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12)
titleCorner.Parent = titleBar

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "ðŸ›¸ Advanced Flight System"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

local creator = Instance.new("TextLabel")
creator.Name = "Creator"
creator.Size = UDim2.new(1, -20, 0, 20)
creator.Position = UDim2.new(0, 10, 0, 35)
creator.BackgroundTransparency = 1
creator.Text = "Created by: sherikyt"
creator.TextColor3 = Color3.fromRGB(180, 180, 220)
creator.Font = Enum.Font.Gotham
creator.TextSize = 14
creator.TextXAlignment = Enum.TextXAlignment.Left
creator.Parent = titleBar

-- Speed Display
local speedFrame = Instance.new("Frame")
speedFrame.Name = "SpeedFrame"
speedFrame.Size = UDim2.new(0.8, 0, 0, 60)
speedFrame.Position = UDim2.new(0.1, 0, 0, 70)
speedFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
speedFrame.BackgroundTransparency = 0.3
speedFrame.Parent = mainFrame

local speedCorner = Instance.new("UICorner")
speedCorner.CornerRadius = UDim.new(0, 10)
speedCorner.Parent = speedFrame

local speedIcon = Instance.new("TextLabel")
speedIcon.Name = "SpeedIcon"
speedIcon.Size = UDim2.new(0, 40, 1, 0)
speedIcon.BackgroundTransparency = 1
speedIcon.Text = "âš¡"
speedIcon.TextColor3 = Color3.fromRGB(255, 215, 0)
speedIcon.Font = Enum.Font.GothamBold
speedIcon.TextSize = 24
speedIcon.Parent = speedFrame

local speedLabel = Instance.new("TextLabel")
speedLabel.Name = "SpeedLabel"
speedLabel.Size = UDim2.new(1, -50, 0.5, 0)
speedLabel.Position = UDim2.new(0, 45, 0, 5)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "CURRENT SPEED"
speedLabel.TextColor3 = Color3.fromRGB(180, 180, 220)
speedLabel.Font = Enum.Font.Gotham
speedLabel.TextSize = 12
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.Parent = speedFrame

local speedValue = Instance.new("TextLabel")
speedValue.Name = "SpeedValue"
speedValue.Size = UDim2.new(1, -50, 0.5, 0)
speedValue.Position = UDim2.new(0, 45, 0, 25)
speedValue.BackgroundTransparency = 1
speedValue.Text = tostring(flySpeed)
speedValue.TextColor3 = Color3.fromRGB(255, 255, 255)
speedValue.Font = Enum.Font.GothamBold
speedValue.TextSize = 20
speedValue.TextXAlignment = Enum.TextXAlignment.Left
speedValue.Parent = speedFrame

-- Control Buttons
local function createButton(name, text, position, color)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 80, 0, 40)
    button.Position = position
    button.BackgroundColor3 = color
    button.BackgroundTransparency = 0.2
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.GothamBold
    button.TextSize = 16
    button.AutoButtonColor = true
    button.Parent = mainFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 255, 255)
    buttonStroke.Thickness = 1
    buttonStroke.Transparency = 0.5
    buttonStroke.Parent = button
    
    return button
end

-- Plus Button
local plusButton = createButton("PlusButton", "+ INCREASE", 
    UDim2.new(0.1, 0, 0, 140), Color3.fromRGB(40, 180, 40))

-- Minus Button
local minusButton = createButton("MinusButton", "- DECREASE", 
    UDim2.new(0.1, 0, 0, 190), Color3.fromRGB(220, 40, 40))

-- Fly Toggle Button
local flyButton = createButton("FlyButton", "ðŸ›¸ TOGGLE FLY", 
    UDim2.new(0.1, 0, 0, 240), Color3.fromRGB(60, 100, 220))

-- Instructions
local instructions = Instance.new("TextLabel")
instructions.Name = "Instructions"
instructions.Size = UDim2.new(0.8, 0, 0, 40)
instructions.Position = UDim2.new(0.1, 0, 0, 290)
instructions.BackgroundTransparency = 1
instructions.Text = "Use movement keys + mouse to control flight direction"
instructions.TextColor3 = Color3.fromRGB(200, 200, 200)
instructions.Font = Enum.Font.Gotham
instructions.TextSize = 12
instructions.TextXAlignment = Enum.TextXAlignment.Center
instructions.Parent = mainFrame

-- Animation for buttons
local function animateButton(button)
    local originalSize = button.Size
    local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    
    button.MouseButton1Down:Connect(function()
        local tween = TweenService:Create(button, tweenInfo, {Size = originalSize - UDim2.new(0, 5, 0, 5)})
        tween:Play()
    end)
    
    button.MouseButton1Up:Connect(function()
        local tween = TweenService:Create(button, tweenInfo, {Size = originalSize})
        tween:Play()
    end)
end

animateButton(plusButton)
animateButton(minusButton)
animateButton(flyButton)

-- Fly Functions
local function startFlying()
    if not humanoidRootPart or not character then return end
    
    humanoid.PlatformStand = true
    isFlying = true
    
    local bg = Instance.new("BodyGyro")
    bg.Name = "FlightGyro"
    bg.P = 10000
    bg.D = 500
    bg.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
    bg.CFrame = humanoidRootPart.CFrame
    bg.Parent = humanoidRootPart
    
    local bv = Instance.new("BodyVelocity")
    bv.Name = "FlightVelocity"
    bv.Velocity = Vector3.new(0, 0, 0)
    bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    bv.P = 10000
    bv.Parent = humanoidRootPart
    
    connection = RunService.RenderStepped:Connect(function(delta)
        if not isFlying or not humanoidRootPart or not bg or not bv then return end
        
        local camera = Workspace.CurrentCamera
        local moveDirection = Vector3.new(0, 0, 0)
        
        -- Get movement from input
        local forwardVector = camera.CFrame.LookVector
        local rightVector = camera.CFrame.RightVector
        local upVector = Vector3.new(0, 1, 0)
        
        -- Forward/Backward (W/S)
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            moveDirection = moveDirection + forwardVector
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            moveDirection = moveDirection - forwardVector
        end
        
        -- Left/Right (A/D)
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            moveDirection = moveDirection - rightVector
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            moveDirection = moveDirection + rightVector
        end
        
        -- Up/Down (Space/Ctrl)
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            moveDirection = moveDirection + upVector
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or UserInputService:IsKeyDown(Enum.KeyCode.RightControl) then
            moveDirection = moveDirection - upVector
        end
        
        -- Normalize direction if moving
        if moveDirection.Magnitude > 0 then
            moveDirection = moveDirection.Unit
        end
        
        -- Update gyro to face camera direction
        bg.CFrame = CFrame.new(humanoidRootPart.Position, humanoidRootPart.Position + camera.CFrame.LookVector)
        
        -- Apply velocity
        bv.Velocity = moveDirection * flySpeed
        flightVelocity = bv.Velocity
    end)
    
    flyButton.Text = "ðŸ›¸ FLYING (ON)"
    flyButton.BackgroundColor3 = Color3.fromRGB(40, 180, 40)
end

local function stopFlying()
    isFlying = false
    
    if connection then
        connection:Disconnect()
        connection = nil
    end
    
    humanoid.PlatformStand = false
    
    if humanoidRootPart then
        local bg = humanoidRootPart:FindFirstChild("FlightGyro")
        local bv = humanoidRootPart:FindFirstChild("FlightVelocity")
        
        if bg then bg:Destroy() end
        if bv then bv:Destroy() end
    end
    
    flyButton.Text = "ðŸ›¸ TOGGLE FLY"
    flyButton.BackgroundColor3 = Color3.fromRGB(60, 100, 220)
end

local function toggleFlying()
    if isFlying then
        stopFlying()
    else
        startFlying()
    end
end

-- Button Functionality
plusButton.MouseButton1Click:Connect(function()
    flySpeed = math.min(flySpeed + 10, 200)
    speedValue.Text = tostring(flySpeed)
end)

minusButton.MouseButton1Click:Connect(function()
    flySpeed = math.max(flySpeed - 10, 10)
    speedValue.Text = tostring(flySpeed)
end)

flyButton.MouseButton1Click:Connect(toggleFlying)

-- Cleanup on character change
character.DescendantRemoving:Connect(function(descendant)
    if descendant.Name == "HumanoidRootPart" then
        stopFlying()
    end
end)

-- Make frame draggable
local dragging = false
local dragInput, dragStart, startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        updateInput(input)
    end
end)

-- Update character reference if it changes
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")
end)

print("Flight Script by sherikyt loaded successfully!")
print("Controls: W/A/S/D for movement, Space/Ctrl for up/down")
print("Use mouse to control flight direction")
